---
layout: default
title: Assignments
---

<h3>Displaying the messages</h3>
<ol>
  <li>Create a MessagesActivity and corresponding layout. Add a RecyclerView to the layout and get a reference to it in the activity.</li>
  <li>Create a layout file for displaying messages in the list, f. ex /res/layout/item_message.xml, and put in some views to display the message sender, text and date.</li>
  <li>Create a MessagesAdapter class that extends RecyclerView.Adapter and implement the required methods.</li>
  <li>Use Retrofit to create a client for the REST API and fetch the messages asynchronously.</li>
  <li>Add the received messages to the adapter and notify it of the changed message list.</li>
</ol>

<h4>Tips</h4>
<ul>
  <li>The ViewHolder you create should contain references to all the TextViews you need to show for each position in the message list.</li>
  <li>You will need a <code>LayoutInflater</code> in MessagesAdapter in <code>onCreateViewHolder</code> to create the layout view of the message. It is probably easiest to use Activitys <code>getLayoutInflater()</code> and pass it to the adapter.</li>
  <li>Store a reference to the list of messages in MessagesAdapter. When you have added some messages to the list, call <code>notifyDataSetChanged</code> on the adapter, and it will render the messages again.</li>
</ul>

<h3>Sending a new message</h3>
<ol>
  <li>Create a NewMessageActivity and corresponding layout with some EditText views to fill in the sender and the message text.</li>
  <li>Create a send button and add an OnClickListener that will create a new Message object based on the input views.</li>
  <li>Extend the client Retrofit API with a send message operation and call it in the OnClickListener.</li>
  <li>Show the MessagesActivity with the updated message list.</li>
</ol>

<h4>Tips</h4>
<ul>
  <li>Use <code>NewMessageActivity.this.finish();</code> to navigate back to the previous Activity.</li>
</ul>

<h3>Show images</h3>
<ol>
  <li>Add an ImageView in your message layout (e.g. item_message.xml).</li>
  <li>In <code>onBindViewHolder</code> in MessagesAdapter, use the Picasso image loader library to load the image from a url if it exists for that message.</li>
</ol>

<h4>Tips</h4>
<ul>
  <li>Add the Picasso dependency to your app.gradle file: compile 'com.squareup.picasso:picasso:2.5.0'.</li>
</ul>

<h3>API</h3>

<p>The server is at: <a href="http://mobile-course.herokuapp.com">
		http://mobile-course.herokuapp.com</a></p>

<p>
It hosts the following JSON endpoints:
<table class="table table-bordered">
	<thead>
		<tr>
			<th>URL</th>
			<th>HTTP verb</th>
			<th>Description</th>
		</tr>
	</thead>
	<tbody>
	<tr>
		<td><a href="http://mobile-course.herokuapp.com/message">http://mobile-course.herokuapp.com/message</a></td>
		<td>GET</td>
		<td>Retrieves all messages</td>
	</tr>
	<tr>
		<td><a href="http://mobile-course.herokuapp.com/message">http://mobile-course.herokuapp.com/message</a></td>
		<td>POST</td>
		<td>Creates a message(see JSON example below)</td>
	</tr>
	<tr>
		<td><a href="http://mobile-course.herokuapp.com/:id">http://mobile-course.herokuapp.com/message/:id</a></td>
		<td>PUT</td>
		<td>Updates a message</td>
	</tr>
	<tr>
		<td><a href="http://mobile-course.herokuapp.com/:id">http://mobile-course.herokuapp.com/message/:id</a></td>
		<td>DELETE</td>
		<td>Deletes a message</td>
	</tr>
	</tbody>
</table>

<h3>POST example</h3>

{% gist 0a2f2c1a6419dc28de22 %}

<h3> Retrofit </h3>
If you want to use retrofit, you will need the following gradle dependency:
<code>compile 'com.squareup.retrofit:retrofit:1.6.1'</code>.

If you want to do things manually and need a framework for JSON-parsing, we suggest using Gson.
